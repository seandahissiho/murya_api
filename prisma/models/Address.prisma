model Address {
  id          String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  ref         String    @unique
  name        String?   @unique
  shortName   String?
  street      String
  zip         String?
  city        String
  countryId   String // ← Foreign key column
  status      Int       @default(1) // 1 = actif, 0 = inactif
  isVirtual   Boolean?  @default(false) // false = interne, true = externe
  createdAt   DateTime  @default(now()) @db.Timestamp(0)
  updatedAt   DateTime  @default(now()) @updatedAt @db.Timestamp(0)
  createdById String?   @db.Uuid // identifiant de l'utilisateur qui a créé cette adresse
  updatedById String?   @db.Uuid // identifiant de l'utilisateur qui a mis à jour cette adresse
  // Metadata for auditing
  // Relations
  country     Country   @relation(fields: [countryId], references: [isoCode], onUpdate: Cascade, onDelete: NoAction) // ← Relation to Country model
  companies   Company[] // Entreprises associées à cette adresse
  users       User[] // Utilisateurs associés à cette adresse
  createdBy   User?     @relation(name: "AddressCreatedBy", fields: [createdById], references: [id], onUpdate: Cascade, onDelete: NoAction, map: "FK_addresses_created_by")
  updatedBy   User?     @relation(name: "AddressUpdatedBy", fields: [updatedById], references: [id], onUpdate: Cascade, onDelete: NoAction, map: "FK_addresses_updated_by")

  @@unique([street, zip, city, countryId], map: "unique_address")
}
