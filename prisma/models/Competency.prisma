model Competency {
  id                String         @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name              String         @unique(map: "competency_name") @db.VarChar(255)
  normalizedName    String         @db.VarChar(255)
  beginnerScore     Int            @default(1) @map("beginner_score")
  intermediateScore Int            @default(2) @map("intermediate_score")
  advancedScore     Int            @default(3) @map("advanced_score")
  expertScore       Int            @default(4) @map("expert_score")
  maxScore          Int            @default(5) @map("max_score")
  type              CompetencyType
  level             Level          @default(EASY)
  createdAt         DateTime       @default(now()) @db.Timestamp(0)
  updatedAt         DateTime       @default(now()) @updatedAt @db.Timestamp(0)

  jobs     Job[]                @relation("JobCompetencies")
  families CompetenciesFamily[] @relation("CompetencyFamilies")
  i18n     CompetencyI18n[]

  @@index([name], map: "idx_competency_name")
}

model CompetencyI18n {
  competencyId String @db.Uuid
  langCode     String @db.VarChar(16)
  name         String @db.VarChar(255)

  competency Competency @relation(fields: [competencyId], references: [id], onUpdate: Cascade, onDelete: Cascade)
  lang       Language   @relation(fields: [langCode], references: [code], onUpdate: Cascade, onDelete: Cascade)

  @@id([competencyId, langCode])
  @@index([langCode])
}
