model Job {
  id              String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  jobFamilyId     String   @db.Uuid
  title           String   @db.VarChar(255)
  normalizedName  String   @db.VarChar(255)
  description     String?  @db.Text
  createdAt       DateTime @default(now()) @db.Timestamp(0)
  updatedAt       DateTime @default(now()) @updatedAt @db.Timestamp(0)
  isActive        Boolean  @default(true)
  popularity      Int      @default(0)
  backgroundColor String   @default("#FFFFFFFF") @db.VarChar(9)
  foregroundColor String   @default("#FFFFFFFF") @db.VarChar(9)
  textColor       String   @default("#FFFFFFFF") @db.VarChar(9)
  overlayColor    String   @default("#FFFFFFFF") @db.VarChar(9)
  imageIndex      Int      @default(0)

  // NEW: special positioning quiz template attached to the job
  positioningQuizId String? // references Quiz.id (String)
  positioningQuiz   Quiz?   @relation("JobPositioningQuiz", fields: [positioningQuizId], references: [id], onUpdate: Cascade, onDelete: SetNull)

  // Relations
  jobFamily            JobFamily            @relation(fields: [jobFamilyId], references: [id], onUpdate: Cascade, onDelete: NoAction, map: "FK_jobs_job_family_id")
  competencies         Competency[]         @relation("JobCompetencies")
  competenciesFamilies CompetenciesFamily[] @relation("JobCompetenciesFamilies")
  userJobs             UserJob[]

  @@index([jobFamilyId])
}
