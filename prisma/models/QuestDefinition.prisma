model QuestDefinition {
  id            String           @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  code          String           @unique @db.VarChar(80)
  title         String           @db.VarChar(160)
  description   String?          @db.Text
  period        QuestPeriod
  category      QuestCategory    @default(BRANCH)
  eventKey      String           @db.VarChar(80)
  targetCount   Int              @default(1)
  meta          Json?
  isActive      Boolean          @default(true)
  parentId      String?          @db.Uuid
  parent        QuestDefinition? @relation("QuestBranches", fields: [parentId], references: [id])
  branches      QuestDefinition[] @relation("QuestBranches")
  uiOrder       Int              @default(0)
  createdAt     DateTime         @default(now()) @db.Timestamp(0)
  updatedAt     DateTime         @default(now()) @updatedAt @db.Timestamp(0)
  rewards       QuestReward[]
  userJobQuests UserJobQuest[]

  @@index([isActive, period])
  @@index([parentId])
}
