model UserLearningResource {
  id           String           @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  userId       String           @db.Uuid
  resourceId   String           @db.Uuid
  openedAt     DateTime?        @db.Timestamp(0)
  readAt       DateTime?        @db.Timestamp(0)
  lastViewedAt DateTime?        @db.Timestamp(0)
  viewsCount   Int              @default(0)
  progress     Float?
  metadata     Json?
  createdAt    DateTime         @default(now()) @db.Timestamp(0)
  updatedAt    DateTime         @default(now()) @updatedAt @db.Timestamp(0)
  user         User             @relation(fields: [userId], references: [id], onUpdate: Cascade, onDelete: Cascade)
  resource     LearningResource @relation(fields: [resourceId], references: [id], onUpdate: Cascade, onDelete: Cascade)

  @@unique([userId, resourceId], map: "unique_user_learning_resource")
  @@index([userId], map: "idx_user_learning_resource_user")
  @@index([resourceId], map: "idx_user_learning_resource_resource")
  @@index([lastViewedAt], map: "idx_user_learning_resource_last_viewed_at")
}
