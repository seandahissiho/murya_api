model UserQuest {
  id                String          @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  userId            String          @db.Uuid
  questDefinitionId String          @db.Uuid
  status            QuestStatus     @default(ACTIVE)
  progressCount     Int             @default(0)
  periodStartAt     DateTime        @db.Timestamp(0)
  periodEndAt       DateTime        @db.Timestamp(0)
  completedAt       DateTime?       @db.Timestamp(0)
  claimedAt         DateTime?       @db.Timestamp(0)
  createdAt         DateTime        @default(now()) @db.Timestamp(0)
  updatedAt         DateTime        @default(now()) @updatedAt @db.Timestamp(0)
  user              User            @relation(fields: [userId], references: [id], onUpdate: Cascade, onDelete: Cascade)
  questDefinition   QuestDefinition @relation(fields: [questDefinitionId], references: [id], onUpdate: Cascade, onDelete: Cascade)

  @@unique([userId, questDefinitionId, periodStartAt])
  @@index([userId])
  @@index([questDefinitionId])
}
