model UserQuiz {
  id          String           @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  userJobId   String           @db.Uuid
  quizId      String           @db.Uuid // Quiz.id is String @default(uuid())
  kind        UserQuizKind     @default(DAILY)
  status      UserQuizStatus   @default(ASSIGNED)
  assignedAt  DateTime         @default(now()) @db.Timestamp(0)
  startedAt   DateTime?        @db.Timestamp(0)
  completedAt DateTime?        @db.Timestamp(0)
  totalScore  Int?             @default(0)
  maxScore    Int?             @default(0)
  percentage  Float?           @default(0)
  createdAt   DateTime         @default(now()) @db.Timestamp(0)
  updatedAt   DateTime         @default(now()) @updatedAt @db.Timestamp(0)
  userJob     UserJob          @relation(fields: [userJobId], references: [id], onUpdate: Cascade, onDelete: Cascade)
  quiz        Quiz             @relation(fields: [quizId], references: [id], onUpdate: Cascade, onDelete: Cascade)
  answers     UserQuizAnswer[]

  @@index([userJobId], map: "idx_user_quiz_user_job")
  @@index([quizId], map: "idx_user_quiz_quiz")
  @@index([kind, status, assignedAt])
}
